## Замена механических концевиков на оптические

Работа в процессе. Актуальные обсуждения — в [группе Micromake на Facebook](https://www.facebook.com/groups/173676226330714/).

### Принцип работы оптического концевика

| Состояние                          | Выход (оптический)            |
| ---------------------------------- | ----------------------------- |
| Засветка светодиода (щель очищена) | Высокий уровень (≈4 В из 5 В) |
| Светодиод перекрыт (щель закрыта)  | Низкий уровень (≈0 В)         |

Изменение напряжения фиксируется между `VCC` и `D0` (или `A0`).

### Как работает штатный кнопочный концевик

| Состояние                   | Схема             |
| --------------------------- | ----------------- |
| Каретка не нажата на кнопку | Контакт замкнут   |
| Каретка нажата (дом)        | Контакт разомкнут |

### Как работает кнопочный зонд автолевелинга

| Состояние                 | Схема             |
| ------------------------- | ----------------- |
| Экструдер касается стекла | Контакт замкнут   |
| Экструдер в воздухе       | Контакт разомкнут |

### Шаги для замены

1. Снимите штатные механические концевики на осях X, Y, Z и автолевелинга.
2. Установите оптические концевики на их место, закрепив щелью в направлении движения каретки/эффектора.
3. Подключите `VCC` оптического датчика к 5 В питания платы.
4. Выход `D0` (или `A0`) подключите вместо выводов механических концевиков (микропереключателей).
5. Проверьте срабатывание концевиков в прошивке:

   * В командах `M119` должны появляться `open`/`triggered` (или аналогичные) при перекрытии щели.
6. При необходимости скорректируйте настройки логики (инверсия) в `Configuration.h`:

   ```cpp
   #define X_ENDSTOP_INVERTING true   // или false в зависимости от датчика
   #define Y_ENDSTOP_INVERTING true
   #define Z_ENDSTOP_INVERTING true
   ```
7. Перепрошейте прошивку и проверьте homing всех осей (`G28`).

*По вопросам установки и отладки смотрите обсуждения в официальной группе.*
